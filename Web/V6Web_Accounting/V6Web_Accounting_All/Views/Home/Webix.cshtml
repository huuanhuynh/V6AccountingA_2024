@{
    Layout = "~/Views/Shared/_Layout_Webix.cshtml";
}
<script type='text/javascript' charset='utf-8'>

    webix.ui({
        view: "window",
        id: "winLookup",
        width: 500,
        position: "center",
        modal: true,
        head: {
            view: "toolbar", cols: [
                { view: "label", id: 'winLookupTitle', label: "Look up window" },
                { view: "button", label: 'X', width: 50, align: 'right', click: "$$('winLookup').hide();" }
            ]
        },
        body: {
            view: "datatable",
            columns: [
                { id: "rank", header: "", css: "rank", width: 50, sort: "int" },
                { id: "title", header: "Film title", width: 200, sort: "string" },
                { id: "year", header: "Released", width: 80, sort: "int" },
                { id: "votes", header: "Votes", width: 100, sort: "int" }
            ],
            select: "row",
            autoheight: true,
            autowidth: true,
            data: []
        }
    });

    var fnPopupLookup = function (lookupKey, headerText, tableCols) {
        var $$winLookup = $$('winLookup'),
            $$lookupTable = $$winLookup.getBody();
        //$$winLookup.getHead().setHTML(headerText);
        $$('winLookupTitle').setHTML(headerText);
        $$lookupTable.refreshColumns(tableCols);
        //$$lookupTable.load(tableValUrl, 'json');
        $$winLookup.show();
    };

    var gridDataTable = {
        view: 'datatable',
        columns: [
            { id: "rank", header: "", css: "rank"},
            { id: "title", header: "Film title" },
            { id: "year", header: "Released" },
            { id: "votes", header: "Votes" }
        ],
        autoheight: true,
        autowidth: true,
        data:
        [
            { id: 1, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 2, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 3, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 4, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 5, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 5, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 6, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 8, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 9, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 10, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 11, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 12, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 13, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 14, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 15, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 16, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 17, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 18, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 19, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 20, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 21, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 22, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 21, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 22, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 23, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 24, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 25, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 26, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 27, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 28, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 29, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 30, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 31, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 32, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 33, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 34, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 },
            { id: 35, title: "The Shawshank Redemption", year: 1994, votes: 678790, rating: 9.2, rank: 1 },
            { id: 36, title: "The Godfather", year: 1972, votes: 511495, rating: 9.2, rank: 2 }
        ]
    };
    var gridCells = [
        //Tab 'Chi tiết'
        {
            header: 'Chi tiết',
            body: {
                rows: [
                    {
                        view: 'form', scroll: true,
                        height: 300,
                        elements:
                        [
                            {
                                cols : [
                                   { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }, { view: 'text' }
                                ]
                            },
                            gridDataTable
                        ]
                    }
                ]
            }
        },
        // Tab 'Khác'
        {
            header: 'Khác',
            body: {}
        }
    ];
    var mainForm = {
        view: 'form',
        width: '100%',
        elements: [
        {
            rows: [
                // Row 'section 1'
                {
                    cols: [
                        {
                            view: "fieldset",
                            body: {
                                rows: [
                                    {
                                        cols: [
                                            { view: 'text', label: 'Số nội bộ' },
                                            { view: 'datepicker', label: 'Ngày hạch toán' }
                                        ]
                                    },
                                    {
                                        cols:
                                        [
                                            { view: 'text', label: 'Số phiếu' },
                                            { view: 'datepicker', label: 'Ngày lập phiếu' }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            view: "fieldset",
                            body: {
                                rows: [
                                    {
                                        cols:
                                        [
                                            { view: 'text', label: 'Tài khoản nợ' },
                                            { view: 'text', label: 'BP/VN' }
                                        ]
                                    },
                                    {
                                        cols:
                                        [
                                            { view: 'text', label: 'Người nộp' }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                }, // 168 112 
                // Row 'section 2'
                {
                    view: "fieldset",
                    body: {
                        rows: [
                            // Row 'Mã đơn vị'
                            {
                                cols: [
                                {
                                    view: 'text',
                                    label: 'Mã đơn vị',
                                    on: {
                                        'onKeyPress': function(keyCode) {
                                            if (13 != keyCode) {
                                                return true;
                                            }
                                            var cols = [
                                                { id: "id", header: "", css: "rank", width: 50, sort: "int" },
                                                { id: "makh", header: "Ma DV", width: 50, sort: "string" },
                                                { id: "tenkh", header: "Ten DV", width: 100, sort: "string" },
                                                { id: "diachi", header: "Dia Chi", width: 200, sort: "string" }
                                            ];
                                            fnPopupLookup('', 'Lookup theo Ma Don Vi', cols);
                                        }
                                }
                            },
                            { view: 'text' }
                        ]
                    },
                        // Row 'Loại phiếu'
                    {
                        cols: [
                            { view: 'text', label: 'Loại phiếu' },
                            { view: 'text' },
                            { view: 'select', options: ['Đồng Việt Nam'], disabled: true },
                            { view: 'text' }
                        ]
                    },
                        // Row 'Mã KH'
                    {
                        cols: [
                        {
                            view: 'text',
                            label: 'Mã khách hàng',
                            on: {
                                'onKeyPress': function(keyCode) {
                                    if (13 != keyCode) {
                                        return true;
                                    }
                                    var cols = [
                                        { id: "id", header: "", css: "rank", width: 50, sort: "int" },
                                        { id: "makh", header: "Ma KH", width: 50, sort: "string" },
                                        { id: "tenkh", header: "Ten KH", width: 100, sort: "string" },
                                        {
                                            id: "diachi", header: "Dia Chi", width: 200, sort: "string"
                                        }
                                    ];
                                    fnPopupLookup('', 'Lookup theo Ma KH', cols);
                                }
                                          }
                                      },
                                      {view: 'text'}
                                   ]
                               },
                               // Row 'Địa chỉ'
                               {
                                   cols: [
                                      { view: 'text', label: 'Địa chỉ' },
                                      { view: 'text' }
                                   ]
                               },
                               // Row 'Diễn giải'
                               {
                                   cols: [
                                      { view: 'text', label: 'Diễn giải' },
                                      { view: 'button', type: 'form', label: 'Chọn nhiều hóa đơn' }
                                   ]
                               }
                    ]
                }
            },
                   // Row 'Tabs'
                   {
                       view: 'tabview', id: 'tabview',
                       cells: gridCells
                   }
            ]
        }
        ]
    };
</script>